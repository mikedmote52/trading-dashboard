<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Power-ups Test - Features 1 & 2</title>
    <link rel="stylesheet" href="/styles/one-click-trading.css">
    <link rel="stylesheet" href="/styles/risk-reward-overlay.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
            color: #1e293b;
        }
        
        .header {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 24px;
        }
        
        .header h1 {
            margin: 0 0 8px 0;
            color: #0f172a;
            font-size: 28px;
            font-weight: 700;
        }
        
        .header p {
            margin: 0;
            color: #64748b;
            font-size: 16px;
        }
        
        .discoveries-table {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .table-header {
            background: #f1f5f9;
            padding: 16px 24px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .table-header h2 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
            color: #0f172a;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #f1f5f9;
        }
        
        th {
            background: #f8fafc;
            font-weight: 600;
            color: #475569;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        tr:hover {
            background: #f8fafc;
        }
        
        .symbol {
            font-weight: 700;
            color: #0f172a;
            font-size: 14px;
        }
        
        .price {
            font-weight: 600;
            color: #059669;
        }
        
        .action {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .action.buy {
            background: #dcfce7;
            color: #166534;
        }
        
        .action.watchlist {
            background: #fef3c7;
            color: #92400e;
        }
        
        .score {
            font-weight: 600;
            color: #3730a3;
        }
        
        .feature-note {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 8px;
            padding: 16px;
            margin: 24px 0;
        }
        
        .feature-note h3 {
            margin: 0 0 8px 0;
            color: #1e40af;
            font-size: 16px;
        }
        
        .feature-note p {
            margin: 0;
            color: #1e40af;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .status {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .status-icon {
            color: #16a34a;
            font-size: 16px;
        }
        
        .status-text {
            color: #15803d;
            font-weight: 500;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéØ Trading Power-ups Test</h1>
        <p>Feature 1: Paper trading with position sizing | Feature 2: Risk/Reward analysis with R-multiples</p>
    </div>

    <div class="status">
        <span class="status-icon">‚úÖ</span>
        <span class="status-text">Server running on port 3003 | Engine: optimized | Paper Trading: enabled</span>
    </div>

    <div class="feature-note">
        <h3>üí° How to Test Trading Power-ups</h3>
        <p>
            <strong>Feature 1:</strong> Each discovery with "BUY" action has trading buttons. Click "Buy $100" for instant paper trades 
            with default risk management, or click ‚öôÔ∏è for advanced options.<br>
            <strong>Feature 2:</strong> Risk:Reward ratios are calculated automatically. Click üìä in any R:R cell for detailed analysis 
            including Kelly Criterion position sizing and expected value calculations.
        </p>
    </div>

    <div class="discoveries-table">
        <div class="table-header">
            <h2>üîç Sample VIGL Discoveries with Trading Actions</h2>
        </div>
        
        <table>
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Symbol</th>
                    <th>Action</th>
                    <th>Price</th>
                    <th>Score</th>
                    <th>RVOL</th>
                    <th>Risk:Reward</th>
                    <th>One-Click Trading</th>
                </tr>
            </thead>
            <tbody>
                <tr class="discovery-row" data-symbol="QUBT">
                    <td>1</td>
                    <td class="symbol">QUBT</td>
                    <td><span class="action buy">BUY</span></td>
                    <td class="price">$18.45</td>
                    <td class="score">89</td>
                    <td>12.4x</td>
                    <td class="risk-reward-cell"></td>
                    <td class="trading-cell"></td>
                </tr>
                <tr class="discovery-row" data-symbol="RGTI">
                    <td>2</td>
                    <td class="symbol">RGTI</td>
                    <td><span class="action buy">BUY</span></td>
                    <td class="price">$3.22</td>
                    <td class="score">86</td>
                    <td>8.7x</td>
                    <td class="risk-reward-cell"></td>
                    <td class="trading-cell"></td>
                </tr>
                <tr class="discovery-row" data-symbol="VIGL">
                    <td>3</td>
                    <td class="symbol">VIGL</td>
                    <td><span class="action buy">BUY</span></td>
                    <td class="price">$4.18</td>
                    <td class="score">82</td>
                    <td>15.2x</td>
                    <td class="risk-reward-cell"></td>
                    <td class="trading-cell"></td>
                </tr>
                <tr class="discovery-row" data-symbol="AEVA">
                    <td>4</td>
                    <td class="symbol">AEVA</td>
                    <td><span class="action watchlist">WATCHLIST</span></td>
                    <td class="price">$2.94</td>
                    <td class="score">74</td>
                    <td>6.3x</td>
                    <td class="risk-reward-cell"></td>
                    <td class="trading-cell"></td>
                </tr>
                <tr class="discovery-row" data-symbol="WOLF">
                    <td>5</td>
                    <td class="symbol">WOLF</td>
                    <td><span class="action buy">BUY</span></td>
                    <td class="price">$7.89</td>
                    <td class="score">78</td>
                    <td>5.9x</td>
                    <td class="risk-reward-cell"></td>
                    <td class="trading-cell"></td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="feature-note">
        <h3>üîß Testing Features</h3>
        <p>
            <strong>Quick Trade:</strong> Click "Buy $100" to place a $100 paper trade with default settings (10% SL, 25% TP)<br>
            <strong>Advanced Options:</strong> Click ‚öôÔ∏è to customize investment amount, stop loss, and take profit levels<br>
            <strong>Risk Analysis:</strong> Click üìä in Risk:Reward column for detailed R-multiple analysis and Kelly sizing<br>
            <strong>Real Integration:</strong> All trades hit the live Alpaca Paper Trading API with actual bracket orders<br>
            <strong>Position Sizing:</strong> Automatically calculates shares based on investment amount and current price
        </p>
    </div>

    <!-- Load the trading components -->
    <script src="/components/one-click-trading.js"></script>
    <script src="/components/risk-reward-overlay.js"></script>
    
    <script>
        // Wait for DOM to be ready, then initialize trading buttons
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üéØ Test page loaded, initializing one-click trading...');
            
            // Give the components a moment to initialize
            setTimeout(() => {
                if (window.oneClickTrading) {
                    console.log('‚úÖ One-click trading ready');
                    window.oneClickTrading.addTradingButtons();
                } else {
                    console.error('‚ùå One-click trading component not found');
                }
                
                if (window.riskRewardOverlay) {
                    console.log('‚úÖ Risk/Reward overlay ready');
                    window.riskRewardOverlay.addRiskRewardColumns();
                } else {
                    console.error('‚ùå Risk/Reward overlay component not found');
                }
            }, 100);
        });
    </script>
</body>
</html>